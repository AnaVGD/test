(()=>{var e={};e.id=276,e.ids=[276],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8856:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>eF,routeModule:()=>eJ,serverHooks:()=>eL,workAsyncStorage:()=>eG,workUnitAsyncStorage:()=>eH});var n,s,a,o,i,l,u,c,d,p={};r.r(p),r.d(p,{POST:()=>eV});var g=r(2706),h=r(8203),m=r(5994),f=r(3369),y=r(6045),b="vercel.ai.error",v=Symbol.for(b),w=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[n]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,b)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};n=v;var z=w,C="AI_APICallError",S=`vercel.ai.error.${C}`,I=Symbol.for(S),T=class extends z{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:a,responseBody:o,cause:i,isRetryable:l=null!=n&&(408===n||409===n||429===n||n>=500),data:u}){super({name:C,message:e,cause:i}),this[s]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=a,this.responseBody=o,this.isRetryable=l,this.data=u}static isInstance(e){return z.hasMarker(e,S)}};s=I;var x="AI_EmptyResponseBodyError",k=`vercel.ai.error.${x}`,E=Symbol.for(k),A=class extends z{constructor({message:e="Empty response body"}={}){super({name:x,message:e}),this[a]=!0}static isInstance(e){return z.hasMarker(e,k)}};function j(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}a=E;var N="AI_InvalidArgumentError",R=`vercel.ai.error.${N}`,$=Symbol.for(R),O=class extends z{constructor({message:e,cause:t,argument:r}){super({name:N,message:e,cause:t}),this[o]=!0,this.argument=r}static isInstance(e){return z.hasMarker(e,R)}};o=$,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var M="AI_JSONParseError",P=`vercel.ai.error.${M}`,U=Symbol.for(P),_=class extends z{constructor({text:e,cause:t}){super({name:M,message:`JSON parsing failed: Text: ${e}.
Error message: ${j(t)}`,cause:t}),this[i]=!0,this.text=e}static isInstance(e){return z.hasMarker(e,P)}};i=U;var q="AI_LoadAPIKeyError",D=`vercel.ai.error.${q}`,V=Symbol.for(D),J=class extends z{constructor({message:e}){super({name:q,message:e}),this[l]=!0}static isInstance(e){return z.hasMarker(e,D)}};l=V,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError");var G="AI_TooManyEmbeddingValuesForCallError",H=`vercel.ai.error.${G}`,L=Symbol.for(H),F=class extends z{constructor(e){super({name:G,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[u]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return z.hasMarker(e,H)}};u=L;var B="AI_TypeValidationError",K=`vercel.ai.error.${B}`,Y=Symbol.for(K),Q=class e extends z{constructor({value:e,cause:t}){super({name:B,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${j(t)}`,cause:t}),this[c]=!0,this.value=e}static isInstance(e){return z.hasMarker(e,K)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};c=Y;var W="AI_UnsupportedFunctionalityError",X=`vercel.ai.error.${W}`,Z=Symbol.for(X),ee=class extends z{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:W,message:t}),this[d]=!0,this.functionality=e}static isInstance(e){return z.hasMarker(e,X)}};function et(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(et):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&et(t)))}d=Z;var er=r(6470),en=r(5487),es=r(8674);function ea(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function eo(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var ei=(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let s=(0,er.d)(r,t);if(null==e)return s;if(r.includes(n))throw new O({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return t=>`${e}${n}${s(t)}`})();function el(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var eu=Symbol.for("vercel.ai.validator");function ec({value:e,schema:t}){let r="object"==typeof t&&null!==t&&eu in t&&!0===t[eu]&&"validate"in t?t:{[eu]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:Q.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:Q.wrap({value:e,cause:t})}}}function ed({text:e,schema:t}){try{let r=en.parse(e);if(null==t)return{success:!0,value:r,rawValue:r};let n=ec({value:r,schema:t});return n.success?{...n,rawValue:r}:n}catch(t){return{success:!1,error:_.isInstance(t)?t:new _({text:e,cause:t})}}}var ep=()=>globalThis.fetch,eg=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:s,abortSignal:a,fetch:o})=>eh({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:s,abortSignal:a,fetch:o}),eh=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:s,abortSignal:a,fetch:o=ep()})=>{try{let i=await o(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:r.content,signal:a}),l=eo(i);if(!i.ok){let t;try{t=await s({response:i,url:e,requestBodyValues:r.values})}catch(t){if(el(t)||T.isInstance(t))throw t;throw new T({message:"Failed to process error response",cause:t,statusCode:i.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw t.value}try{return await n({response:i,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(el(t)||T.isInstance(t)))throw t;throw new T({message:"Failed to process successful response",cause:t,statusCode:i.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(t){if(el(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let n=t.cause;if(null!=n)throw new T({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}};async function em(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var ef=e=>async({response:t})=>{let r=eo(t);if(null==t.body)throw new A({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new es.Z).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(ed({text:t,schema:e}))}}))}},ey=e=>async({response:t,url:r,requestBodyValues:n})=>{let s=await t.text(),a=ed({text:s,schema:e}),o=eo(t);if(!a.success)throw new T({message:"Invalid JSON response",cause:a.error,statusCode:t.status,responseHeaders:o,responseBody:s,url:r,requestBodyValues:n});return{responseHeaders:o,value:a.value,rawValue:a.rawValue}},{btoa:eb,atob:ev}=globalThis,ew=r(379);function ez(e){if(null!=e&&"object"==typeof e&&"object"===e.type&&(null==e.properties||0===Object.keys(e.properties).length))return;if("boolean"==typeof e)return{type:"boolean",properties:{}};let{type:t,description:r,required:n,properties:s,items:a,allOf:o,anyOf:i,oneOf:l,format:u,const:c,minLength:d,enum:p}=e,g={};if(r&&(g.description=r),n&&(g.required=n),u&&(g.format=u),void 0!==c&&(g.enum=[c]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(e=>"null"!==e)[0],g.nullable=!0):g.type=t:"null"===t?g.type="null":g.type=t),void 0!==p&&(g.enum=p),null!=s&&(g.properties=Object.entries(s).reduce((e,[t,r])=>(e[t]=ez(r),e),{})),a&&(g.items=Array.isArray(a)?a.map(ez):ez(a)),o&&(g.allOf=o.map(ez)),i){if(i.some(e=>"object"==typeof e&&(null==e?void 0:e.type)==="null")){let e=i.filter(e=>!("object"==typeof e&&(null==e?void 0:e.type)==="null"));if(1===e.length){let t=ez(e[0]);"object"==typeof t&&(g.nullable=!0,Object.assign(g,t))}else g.anyOf=e.map(ez),g.nullable=!0}else g.anyOf=i.map(ez)}return l&&(g.oneOf=l.map(ez)),void 0!==d&&(g.minLength=d),g}function eC(e){return e.includes("/")?e:`models/${e}`}var eS=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:s,requestBodyValues:a})=>{let o=await n.text(),i=eo(n);if(""===o.trim())return{responseHeaders:i,value:new T({message:n.statusText,url:s,requestBodyValues:a,statusCode:n.status,responseHeaders:i,responseBody:o,isRetryable:null==r?void 0:r(n)})};try{let l=function({text:e,schema:t}){try{let r=en.parse(e);if(null==t)return r;return function({value:e,schema:t}){let r=ec({value:e,schema:t});if(!r.success)throw Q.wrap({value:e,cause:r.error});return r.value}({value:r,schema:t})}catch(t){if(_.isInstance(t)||Q.isInstance(t))throw t;throw new _({text:e,cause:t})}}({text:o,schema:e});return{responseHeaders:i,value:new T({message:t(l),url:s,requestBodyValues:a,statusCode:n.status,responseHeaders:i,responseBody:o,data:l,isRetryable:null==r?void 0:r(n,l)})}}catch(e){return{responseHeaders:i,value:new T({message:n.statusText,url:s,requestBodyValues:a,statusCode:n.status,responseHeaders:i,responseBody:o,isRetryable:null==r?void 0:r(n)})}}})({errorSchema:ew.z.object({error:ew.z.object({code:ew.z.number().nullable(),message:ew.z.string(),status:ew.z.string()})}),errorToMessage:e=>e.error.message});function eI({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var eT=class{constructor(e,t,r){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=r}get supportsStructuredOutputs(){var e;return null==(e=this.settings.structuredOutputs)||e}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:r,temperature:n,topP:s,topK:a,frequencyPenalty:o,presencePenalty:i,stopSequences:l,responseFormat:u,seed:c}){var d,p;let g=e.type,h=[];null!=c&&h.push({type:"unsupported-setting",setting:"seed"});let m={maxOutputTokens:r,temperature:n,topK:a,topP:s,frequencyPenalty:o,presencePenalty:i,stopSequences:l,responseMimeType:(null==u?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(null==u?void 0:u.type)==="json"&&null!=u.schema&&this.supportsStructuredOutputs?ez(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp}},{contents:f,systemInstruction:y}=function(e){var t,r;let n=[],s=[],a=!0;for(let{role:o,content:i}of e)switch(o){case"system":if(!a)throw new ee({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:i});break;case"user":{a=!1;let e=[];for(let n of i)switch(n.type){case"text":e.push({text:n.text});break;case"image":e.push(n.image instanceof URL?{fileData:{mimeType:null!=(t=n.mimeType)?t:"image/jpeg",fileUri:n.image.toString()}}:{inlineData:{mimeType:null!=(r=n.mimeType)?r:"image/jpeg",data:function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return eb(t)}(n.image)}});break;case"file":e.push(n.data instanceof URL?{fileData:{mimeType:n.mimeType,fileUri:n.data.toString()}}:{inlineData:{mimeType:n.mimeType,data:n.data}});break;default:throw new ee({functionality:`prompt part: ${n}`})}s.push({role:"user",parts:e});break}case"assistant":a=!1,s.push({role:"model",parts:i.map(e=>{switch(e.type){case"text":return 0===e.text.length?void 0:{text:e.text};case"tool-call":return{functionCall:{name:e.toolName,args:e.args}}}}).filter(e=>void 0!==e)});break;case"tool":a=!1,s.push({role:"user",parts:i.map(e=>({functionResponse:{name:e.toolName,response:{name:e.toolName,content:e.result}}}))});break;default:throw Error(`Unsupported role: ${o}`)}return{systemInstruction:n.length>0?{parts:n}:void 0,contents:s}}(t);switch(g){case"regular":{let{tools:t,toolConfig:r,toolWarnings:n}=function(e,t,r){var n,s;let a=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0,o=[];if(t)return{tools:r?{googleSearch:{}}:{googleSearchRetrieval:{}},toolConfig:void 0,toolWarnings:o};if(null==a)return{tools:void 0,toolConfig:void 0,toolWarnings:o};let i=[];for(let e of a)"provider-defined"===e.type?o.push({type:"unsupported-tool",tool:e}):i.push({name:e.name,description:null!=(s=e.description)?s:"",parameters:ez(e.parameters)});let l=e.toolChoice;if(null==l)return{tools:{functionDeclarations:i},toolConfig:void 0,toolWarnings:o};let u=l.type;switch(u){case"auto":return{tools:{functionDeclarations:i},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:i},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:i},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:i},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[l.toolName]}},toolWarnings:o};default:throw new ee({functionality:`Unsupported tool choice type: ${u}`})}}(e,null!=(d=this.settings.useSearchGrounding)&&d,this.modelId.includes("gemini-2"));return{args:{generationConfig:m,contents:f,systemInstruction:y,safetySettings:this.settings.safetySettings,tools:t,toolConfig:r,cachedContent:this.settings.cachedContent},warnings:[...h,...n]}}case"object-json":return{args:{generationConfig:{...m,responseMimeType:"application/json",responseSchema:null!=e.schema&&this.supportsStructuredOutputs?ez(e.schema):void 0},contents:f,systemInstruction:y,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:h};case"object-tool":return{args:{generationConfig:m,contents:f,tools:{functionDeclarations:[{name:e.tool.name,description:null!=(p=e.tool.description)?p:"",parameters:ez(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:h};default:throw Error(`Unsupported type: ${g}`)}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,r,n,s,a,o,i,l;let{args:u,warnings:c}=await this.getArgs(e),d=JSON.stringify(u),p=ea(await em(this.config.headers),e.headers),{responseHeaders:g,value:h}=await eg({url:`${this.config.baseURL}/${eC(this.modelId)}:generateContent`,headers:p,body:u,failedResponseHandler:eS,successfulResponseHandler:ey(eR),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:m,...f}=u,y=h.candidates[0],b=ex({parts:null!=(r=null==(t=y.content)?void 0:t.parts)?r:[],generateId:this.config.generateId}),v=h.usageMetadata;return{text:ek(null!=(s=null==(n=y.content)?void 0:n.parts)?s:[]),toolCalls:b,finishReason:eI({finishReason:y.finishReason,hasToolCalls:null!=b&&b.length>0}),usage:{promptTokens:null!=(a=null==v?void 0:v.promptTokenCount)?a:NaN,completionTokens:null!=(o=null==v?void 0:v.candidatesTokenCount)?o:NaN},rawCall:{rawPrompt:m,rawSettings:f},rawResponse:{headers:g},warnings:c,providerMetadata:{google:{groundingMetadata:null!=(i=y.groundingMetadata)?i:null,safetyRatings:null!=(l=y.safetyRatings)?l:null}},sources:eO({groundingMetadata:y.groundingMetadata,generateId:this.config.generateId}),request:{body:d}}}async doStream(e){let t;let{args:r,warnings:n}=await this.getArgs(e),s=JSON.stringify(r),a=ea(await em(this.config.headers),e.headers),{responseHeaders:o,value:i}=await eg({url:`${this.config.baseURL}/${eC(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:r,failedResponseHandler:eS,successfulResponseHandler:ef(e$),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:l,...u}=r,c="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},p=this.config.generateId,g=!1;return{stream:i.pipeThrough(new TransformStream({transform(e,r){var n,s,a,o,i,l;if(!e.success){r.enqueue({type:"error",error:e.error});return}let u=e.value,h=u.usageMetadata;null!=h&&(d={promptTokens:null!=(n=h.promptTokenCount)?n:NaN,completionTokens:null!=(s=h.candidatesTokenCount)?s:NaN});let m=null==(a=u.candidates)?void 0:a[0];if(null==m)return;if(null!=m.finishReason){for(let e of(c=eI({finishReason:m.finishReason,hasToolCalls:g}),null!=(o=eO({groundingMetadata:m.groundingMetadata,generateId:p}))?o:[]))r.enqueue({type:"source",source:e});t={google:{groundingMetadata:null!=(i=m.groundingMetadata)?i:null,safetyRatings:null!=(l=m.safetyRatings)?l:null}}}let f=m.content;if(null==f)return;let y=ek(f.parts);null!=y&&r.enqueue({type:"text-delta",textDelta:y});let b=ex({parts:f.parts,generateId:p});if(null!=b)for(let e of b)r.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:e.args}),r.enqueue({type:"tool-call",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,args:e.args}),g=!0},flush(e){e.enqueue({type:"finish",finishReason:c,usage:d,providerMetadata:t})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:o},warnings:n,request:{body:s}}}};function ex({parts:e,generateId:t}){let r=e.filter(e=>"functionCall"in e);return 0===r.length?void 0:r.map(e=>({toolCallType:"function",toolCallId:t(),toolName:e.functionCall.name,args:JSON.stringify(e.functionCall.args)}))}function ek(e){let t=e.filter(e=>"text"in e);return 0===t.length?void 0:t.map(e=>e.text).join("")}var eE=ew.z.object({role:ew.z.string(),parts:ew.z.array(ew.z.union([ew.z.object({text:ew.z.string()}),ew.z.object({functionCall:ew.z.object({name:ew.z.string(),args:ew.z.unknown()})})]))}),eA=ew.z.object({web:ew.z.object({uri:ew.z.string(),title:ew.z.string()}).nullish(),retrievedContext:ew.z.object({uri:ew.z.string(),title:ew.z.string()}).nullish()}),ej=ew.z.object({webSearchQueries:ew.z.array(ew.z.string()).nullish(),retrievalQueries:ew.z.array(ew.z.string()).nullish(),searchEntryPoint:ew.z.object({renderedContent:ew.z.string()}).nullish(),groundingChunks:ew.z.array(eA).nullish(),groundingSupports:ew.z.array(ew.z.object({segment:ew.z.object({startIndex:ew.z.number().nullish(),endIndex:ew.z.number().nullish(),text:ew.z.string().nullish()}),segment_text:ew.z.string().nullish(),groundingChunkIndices:ew.z.array(ew.z.number()).nullish(),supportChunkIndices:ew.z.array(ew.z.number()).nullish(),confidenceScores:ew.z.array(ew.z.number()).nullish(),confidenceScore:ew.z.array(ew.z.number()).nullish()})).nullish(),retrievalMetadata:ew.z.union([ew.z.object({webDynamicRetrievalScore:ew.z.number()}),ew.z.object({})]).nullish()}),eN=ew.z.object({category:ew.z.string(),probability:ew.z.string(),probabilityScore:ew.z.number().nullish(),severity:ew.z.string().nullish(),severityScore:ew.z.number().nullish(),blocked:ew.z.boolean().nullish()}),eR=ew.z.object({candidates:ew.z.array(ew.z.object({content:eE.nullish(),finishReason:ew.z.string().nullish(),safetyRatings:ew.z.array(eN).nullish(),groundingMetadata:ej.nullish()})),usageMetadata:ew.z.object({promptTokenCount:ew.z.number().nullish(),candidatesTokenCount:ew.z.number().nullish(),totalTokenCount:ew.z.number().nullish()}).nullish()}),e$=ew.z.object({candidates:ew.z.array(ew.z.object({content:eE.nullish(),finishReason:ew.z.string().nullish(),safetyRatings:ew.z.array(eN).nullish(),groundingMetadata:ej.nullish()})).nullish(),usageMetadata:ew.z.object({promptTokenCount:ew.z.number().nullish(),candidatesTokenCount:ew.z.number().nullish(),totalTokenCount:ew.z.number().nullish()}).nullish()});function eO({groundingMetadata:e,generateId:t}){var r;return null==(r=null==e?void 0:e.groundingChunks)?void 0:r.filter(e=>null!=e.web).map(e=>({sourceType:"url",id:t(),url:e.web.uri,title:e.web.title}))}var eM=class{constructor(e,t,r){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=r}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:r}){if(e.length>this.maxEmbeddingsPerCall)throw new F({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let n=ea(await em(this.config.headers),t),{responseHeaders:s,value:a}=await eg({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:n,body:{requests:e.map(e=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:e}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:eS,successfulResponseHandler:ey(eP),abortSignal:r,fetch:this.config.fetch});return{embeddings:a.embeddings.map(e=>e.values),usage:void 0,rawResponse:{headers:s}}}},eP=ew.z.object({embeddings:ew.z.array(ew.z.object({values:ew.z.array(ew.z.number())}))});function eU(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}var e_=function(e={}){var t,r;let n=null!=(t=null==(r=e.baseURL)?void 0:r.replace(/\/$/,""))?t:"https://generativelanguage.googleapis.com/v1beta",s=()=>({"x-goog-api-key":function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new J({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new J({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new J({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new J({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(t,r={})=>{var a;return new eT(t,r,{provider:"google.generative-ai",baseURL:n,headers:s,generateId:null!=(a=e.generateId)?a:ei,isSupportedUrl:eU,fetch:e.fetch})},o=(t,r={})=>new eM(t,r,{provider:"google.generative-ai",baseURL:n,headers:s,fetch:e.fetch}),i=function(e,t){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return a(e,t)};return i.languageModel=a,i.chat=a,i.generativeAI=a,i.embedding=o,i.textEmbedding=o,i.textEmbeddingModel=o,i}();let eq=(0,y.N)("gpt-3.5-turbo");e_("gemini-1.5-flash");var eD=r(5353);async function eV(e){let{messages:t}=await e.json(),r=(0,eD.gM)({model:eq,system:"You are a friendly assistant!",messages:t,maxSteps:5,tools:f.Yl});return console.log("Result de tools",r.toolCalls),r.toDataStreamResponse()}let eJ=new g.AppRouteRouteModule({definition:{kind:h.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/avgd/Documents/test/src/app/api/chat/route.ts",nextConfigOutput:"",userland:p}),{workAsyncStorage:eG,workUnitAsyncStorage:eH,serverHooks:eL}=eJ;function eF(){return(0,m.patchFetch)({workAsyncStorage:eG,workUnitAsyncStorage:eH})}},6487:()=>{},8335:()=>{},3369:(e,t,r)=>{"use strict";r.d(t,{Yl:()=>i});var n=r(6045),s=r(5353),a=r(379);let o=JSON.parse('[{"id":"no-console","description":"Avoid using console.log in production code.","pattern":"console.log","suggestion":"Consider using a logging library instead. Example: Winston or Pino for structured logging."},{"id":"prefer-const-over-let","description":"Prefer \'const\' over \'let\' when the variable is not reassigned.","pattern":"let ","suggestion":"Use \'const\' instead of \'let\' to avoid unintentional reassignments."},{"id":"use-template-literals","description":"Use template literals instead of string concatenation.","pattern":"\'.*\' \\\\+ .* \\\\+ \'.*\'","suggestion":"Consider using template literals for better readability and performance. Example: `Hello, ${user.name}!`"},{"id":"avoid-any-typing","description":"Avoid using \'any\' for typing.","pattern":": any","suggestion":"Use specific types instead of \'any\' to improve type safety and code maintainability."},{"id":"no-errors-schema","description":"Avoid using NO_ERRORS_SCHEMA in Angular tests.","pattern":"NO_ERRORS_SCHEMA","suggestion":"Prefer CUSTOM_ELEMENTS_SCHEMA to allow only valid custom elements and ensure cleaner, safer code."},{"id":"remove-unused-imports","description":"Remove unused imports from the codebase.","pattern":"import .*;","suggestion":"Ensure that all imported modules are being used in the code to avoid unnecessary clutter."},{"id":"follow-aaa-pattern","description":"Follow the Arrange-Act-Assert pattern in unit tests.","pattern":"it\\\\(.*\\\\{.*\\\\}","suggestion":"Structure your tests with clear Arrange, Act, and Assert steps for readability and maintainability."},{"id":"use-optional-chaining","description":"Use optional chaining to simplify null/undefined checks.","pattern":"if\\\\s*\\\\(.*&&.*\\\\)","suggestion":"Consider using optional chaining (?.) to reduce nesting and improve code readability."},{"id":"avoid-direct-http","description":"Avoid making direct HTTP requests; prefer using SDKs.","pattern":"http\\\\.get\\\\(.*\\\\)","suggestion":"Use SDKs where available to abstract API interactions and improve maintainability."},{"id":"remove-fixture-detect-changes","description":"Remove unnecessary calls to fixture.detectChanges in Angular tests.","pattern":"fixture.detectChanges\\\\(\\\\)","suggestion":"Only call fixture.detectChanges when necessary to reduce test runtime."}]'),i={getStockPrice:(0,s.z6)({description:"Get price for a stock",parameters:a.z.object({symbol:a.z.string().describe("The stock symbol to get the price for"),price:a.z.number().describe("The price of the stock")}),execute:async function({symbol:e,price:t}){return await new Promise(e=>setTimeout(e,2e3)),{symbol:e,price:t}}}),codeLint:(0,s.z6)({description:"Analyze code and return recommended rule corrections",parameters:a.z.object({code:a.z.string().describe("The source code to analyze")}),execute:async function({code:e}){let t=`
        Analyze the following JavaScript code and check it against these predefined rules:
        ${o.map(e=>`Rule: ${e.id} - ${e.description}`).join("\n")}
        
        Code to analyze:
        \`\`\`js
        ${e}
        \`\`\`
        
        Provide a detailed JSON response with:
        - The rule ID that was violated
        - Line number of the issue
        - Content of the problematic line
        - Suggested fix based on the predefined rules
        `,r=(0,n.N)("gpt-3.5-turbo"),i=a.z.object({ruleId:a.z.string().describe("The ID of the rule that was violated"),lineNumber:a.z.number().describe("The line number where the issue occurred"),lineContent:a.z.string().describe("The content of the problematic line"),suggestedFix:a.z.string().describe("The suggested fix based on the predefined rules")}),{object:l}=await (0,s.pY)({model:r,prompt:t,schema:i});return l}}),getMockTableData:(0,s.z6)({description:"Generate mock data for a table based on a description",parameters:a.z.object({description:a.z.string().describe("Description of the table and its columns"),numRows:a.z.number().optional().describe("Number of rows to generate (default: 10)")}),execute:async function({description:e,numRows:t=10}){let r=`
        Generate mock data for a table based on the following description:
        ${e}
The table should have ${t} rows.
        Provide the mock data in JSON format with column names as keys and arrays of values as values.
        example:
        {
          "id": [1, 2, 3, 4, 5],
          "name": ["John", "Jane", "Bob", "Alice", "Tom"],
          "age": [25, 30, 40, 50, 60]
        }
        `,a=(0,n.N)("gpt-3.5-turbo"),{text:o}=await (0,s.Df)({model:a,prompt:r,maxTokens:500,maxRetries:2});return console.log(o),JSON.parse(o)}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[994,120],()=>r(8856));module.exports=n})();